<template>
  <div class="content-container">
    <div class="py-4 px-4 flex items-center justify-between border-b border-borderColor">
      <h3 class="text-lg font-bold">Bảng điều khiển</h3>
    </div>
    <div class="px-4 mt-4">
      <div class="grid grid-cols-12 gap-4">
        <div class="col-span-5 flex items-center justify-center">
          <div class="grid grid-cols-12 gap-4">
            <div class="col-span-6">
              <div class="flex items-center justify-between p-6 bg-primaryOpacityColor rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" class="text-primaryColor">
                  <path
                    fill="currentColor"
                    d="M3.555 14.257c-.718-3.353-1.078-5.03-.177-6.143C4.278 7 5.993 7 9.422 7h5.156c3.43 0 5.143 0 6.044 1.114s.541 2.79-.177 6.143l-.429 2c-.487 2.273-.73 3.409-1.555 4.076S16.474 21 14.15 21h-4.3c-2.324 0-3.486 0-4.31-.667c-.826-.667-1.07-1.803-1.556-4.076z"
                  ></path>
                  <path
                    fill="currentColor"
                    d="M8 11.25a.75.75 0 0 0 0 1.5h8a.75.75 0 0 0 0-1.5zM9.25 15a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75"
                  ></path>
                  <path
                    fill="currentColor"
                    fill-rule="evenodd"
                    d="M14.665 2.33a.75.75 0 0 1 1.006.335l3 6a.75.75 0 1 1-1.342.67l-3-6a.75.75 0 0 1 .336-1.006m-5.33.001a.75.75 0 0 0-1.006.335l-3 6a.75.75 0 1 0 1.342.67l3-6a.75.75 0 0 0-.336-1.006"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                <div>
                  <div class="text-bodyColor">Tổng số đơn hàng</div>
                  <div class="text-end font-bold">13600</div>
                </div>
              </div>
            </div>
            <div class="col-span-6">
              <div class="flex items-center justify-between p-6 bg-primaryOpacityColor rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="52" height="52" class="text-primaryColor">
                  <g>
                    <g>
                      <rect width="48" height="48" fill="none" />
                    </g>
                    <g>
                      <g>
                        <path
                          fill="currentColor"
                          d="M43,7H38a2,2,0,0,0-1.4.6L34,10.2,31.4,7.6A2,2,0,0,0,30,7H5a2.9,2.9,0,0,0-3,3V38a2.9,2.9,0,0,0,3,3H30a2,2,0,0,0,1.4-.6L34,37.8l2.6,2.6A2,2,0,0,0,38,41h5a2.9,2.9,0,0,0,3-3V10A2.9,2.9,0,0,0,43,7ZM42,37H38.8l-3.4-3.4a1.9,1.9,0,0,0-2.8,0L29.2,37H6V11H29.2l3.4,3.4a1.9,1.9,0,0,0,2.8,0L38.8,11H42Z"
                        />
                        <path fill="currentColor" d="M34,17a2,2,0,0,0-2,2v2a2,2,0,0,0,4,0V19A2,2,0,0,0,34,17Z" />
                        <path fill="currentColor" d="M34,25a2,2,0,0,0-2,2v2a2,2,0,0,0,4,0V27A2,2,0,0,0,34,25Z" />
                        <circle fill="currentColor" cx="14" cy="20" r="2" />
                        <circle fill="currentColor" cx="22" cy="28" r="2" />
                        <path fill="currentColor" d="M21.6,17.6l-10,10a1.9,1.9,0,0,0,0,2.8,1.9,1.9,0,0,0,2.8,0l10-10a2,2,0,0,0-2.8-2.8Z" />
                      </g>
                    </g>
                  </g>
                </svg>
                <div>
                  <div class="text-bodyColor">Khuyến mãi</div>
                  <div class="text-end font-bold">13600</div>
                </div>
              </div>
            </div>
            <div class="col-span-6">
              <div class="flex items-center justify-between p-6 bg-primaryOpacityColor rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" class="text-primaryColor">
                  <path
                    d="M17.5 21.0001H6.5C5.11929 21.0001 4 19.8808 4 18.5001C4 14.4194 10 14.5001 12 14.5001C14 14.5001 20 14.4194 20 18.5001C20 19.8808 18.8807 21.0001 17.5 21.0001Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <div>
                  <div class="text-bodyColor">Tổng số khách hàng</div>
                  <div class="text-end font-bold">8000</div>
                </div>
              </div>
            </div>
            <div class="col-span-6">
              <div class="flex items-center justify-between p-6 bg-primaryOpacityColor rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" class="text-primaryColor">
                  <path
                    fill="none"
                    d="M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm1 12.915V18h-2v-1.08c-2.339-.367-3-2.002-3-2.92h2c.011.143.159 1 2 1 1.38 0 2-.585 2-1 0-.324 0-1-2-1-3.48 0-4-1.88-4-3 0-1.288 1.029-2.584 3-2.915V6.012h2v1.109c1.734.41 2.4 1.853 2.4 2.879h-1l-1 .018C13.386 9.638 13.185 9 12 9c-1.299 0-2 .516-2 1 0 .374 0 1 2 1 3.48 0 4 1.88 4 3 0 1.288-1.029 2.584-3 2.915z"
                  />
                  <path
                    fill="currentColor"
                    d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"
                  />
                  <path
                    fill="currentColor"
                    d="M12 11c-2 0-2-.626-2-1 0-.484.701-1 2-1 1.185 0 1.386.638 1.4 1.018l1-.018h1c0-1.026-.666-2.469-2.4-2.879V6.012h-2v1.073C9.029 7.416 8 8.712 8 10c0 1.12.52 3 4 3 2 0 2 .676 2 1 0 .415-.62 1-2 1-1.841 0-1.989-.857-2-1H8c0 .918.661 2.553 3 2.92V18h2v-1.085c1.971-.331 3-1.627 3-2.915 0-1.12-.52-3-4-3z"
                  />
                </svg>
                <div>
                  <div class="text-bodyColor">Doanh thu</div>
                  <div class="text-end font-bold">{{ formatPrice(130000000) }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-span-7">
          <Bar id="my-chart-id" :options="chartOptions" :data="chartData" />
        </div>
      </div>
    </div>
    <div class="px-4 mt-12">
      <h5 class="text-base font-bold pb-4 mb-4 border-b border-borderColor">Sản phẩm mới thêm</h5>
      <table class="table">
        <thead>
          <tr>
            <th class="text-center">ID</th>
            <th>Sản phẩm</th>
            <th>Thể loại</th>
            <th>Mô tả</th>
            <th>Giá</th>
            <th>Kho hàng</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="product in products" :key="product.id">
            <td class="text-center">{{ product.id }}</td>
            <td>
              <div class="flex items-center justify-start">
                <img src="@/assets/images/product-1.jpg" class="w-20" alt="" />
                <div>{{ product.name }}</div>
              </div>
            </td>
            <td>{{ product.category }}</td>
            <td>{{ product.description }}</td>
            <td>{{ product.price | currency }}</td>
            <td>{{ product.stock }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="px-4 mt-12">
      <h5 class="text-base font-bold pb-4 mb-4 border-b border-borderColor">Đơn hàng gần đây</h5>
      <table class="table">
        <thead>
          <tr>
            <th class="text-center">Mã đơn hàng</th>
            <th>Ngày</th>
            <th>Sản phẩm</th>
            <th>Tên khách hàng</th>
            <th>Mã số Email</th>
            <th>Số điện thoại</th>
            <th>Địa chỉ</th>
            <th>Loại thanh toán</th>
            <th>Trạng thái</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="order in orders" :key="order.id">
            <td class="text-center">{{ order.id }}</td>
            <td>{{ formatDateLong(order.date) }}</td>
            <td>
              <div class="flex items-center justify-start">
                <img src="@/assets/images/product-1.jpg" class="w-20" alt="" />
                <div>{{ order.product }}</div>
              </div>
            </td>
            <td>{{ order.customerName }}</td>
            <td>{{ order.email }}</td>
            <td>{{ order.phone }}</td>
            <td>{{ order.address }}</td>
            <td>{{ order.paymentType }}</td>
            <td>{{ order.status }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</template>

<script>
import { defineComponent, reactive, ref, computed, watch, onMounted } from 'vue'
import { formatPrice, formatDateLong } from '@/utils'
import { useRoute, useRouter } from 'vue-router'
import { useUserStore } from '@/stores'

import { Bar } from 'vue-chartjs'
import { Chart as ChartJS, Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js'

ChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale)

export default defineComponent({
  components: { Bar },
  setup() {
    const userStore = useUserStore()
    const route = useRoute()
    const router = useRouter()

    const chartData = ref({
      labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
      datasets: [
        {
          label: 'Doanh thu (triệu VND)',
          data: [1200, 1500, 1700, 1100, 1900, 1300, 2000, 2200, 2100, 2500, 2400, 2600],
          backgroundColor: '#DEF9EC',
          borderColor: '#1E88E5',
          borderWidth: 1,
          hoverBackgroundColor: '#3BB77E',
          hoverBorderColor: '#1565C0'
        }
      ]
    })

    const chartOptions = ref({
      responsive: true
    })

    const products = ref([
      {
        id: 1,
        name: 'Laptop Dell XPS 13',
        category: 'Laptop',
        description: 'Laptop Dell XPS 13 với cấu hình mạnh mẽ, màn hình sắc nét',
        price: 25000,
        stock: 50
      },
      {
        id: 2,
        name: 'Smartphone Samsung Galaxy S22',
        category: 'Smartphone',
        description: 'Smartphone cao cấp với màn hình AMOLED và camera 108MP',
        price: 18000,
        stock: 30
      },
      {
        id: 3,
        name: 'Tai nghe Sony WH-1000XM4',
        category: 'Tai nghe',
        description: 'Tai nghe không dây, chống ồn, âm thanh chất lượng cao',
        price: 9000,
        stock: 15
      },
      {
        id: 4,
        name: 'Máy tính bảng Apple iPad Pro 11',
        category: 'Máy tính bảng',
        description: 'Máy tính bảng mạnh mẽ, màn hình Retina và chip M1',
        price: 22000,
        stock: 20
      },
      {
        id: 5,
        name: 'Chuột Logitech MX Master 3',
        category: 'Phụ kiện',
        description: 'Chuột không dây chuyên nghiệp với thiết kế tiện dụng',
        price: 2500,
        stock: 100
      }
    ])

    const orders = ref([
      {
        id: 'OD001',
        date: '2024-12-01',
        product: 'Laptop Dell XPS 13',
        customerName: 'Nguyễn Văn A',
        email: 'nguyenvana@example.com',
        phone: '0912345678',
        address: '123 Đường Lê Lợi, TP.HCM',
        paymentType: 'Thanh toán trực tuyến',
        status: 'Đã giao'
      },
      {
        id: 'OD002',
        date: '2024-12-02',
        product: 'Smartphone Samsung Galaxy S22',
        customerName: 'Trần Thị B',
        email: 'tranb@example.com',
        phone: '0912345679',
        address: '456 Đường Nguyễn Trãi, Hà Nội',
        paymentType: 'Thanh toán khi nhận hàng',
        status: 'Chờ xử lý'
      },
      {
        id: 'OD003',
        date: '2024-12-05',
        product: 'Tai nghe Sony WH-1000XM4',
        customerName: 'Lê Thị C',
        email: 'lethec@example.com',
        phone: '0912345680',
        address: '789 Đường Trần Hưng Đạo, Đà Nẵng',
        paymentType: 'Chuyển khoản ngân hàng',
        status: 'Đã giao'
      },
      {
        id: 'OD004',
        date: '2024-12-08',
        product: 'Máy tính bảng Apple iPad Pro 11',
        customerName: 'Phạm Minh D',
        email: 'phamminhd@example.com',
        phone: '0912345681',
        address: '1010 Đường Phan Đình Phùng, TP.HCM',
        paymentType: 'Thanh toán trực tuyến',
        status: 'Đang giao'
      },
      {
        id: 'OD005',
        date: '2024-12-10',
        product: 'Chuột Logitech MX Master 3',
        customerName: 'Hoàng Anh E',
        email: 'hoanganhe@example.com',
        phone: '0912345682',
        address: '2020 Đường Phố Huế, Hà Nội',
        paymentType: 'Thanh toán khi nhận hàng',
        status: 'Đã giao'
      }
    ])

    return { formatDateLong, formatPrice, chartData, chartOptions, products, orders }
  },
  methods: {
    scrollToTop() {
      window.scrollTo({ top: 0 })
    }
  },
  created() {
    this.scrollToTop()
  }
})
</script>

<style scoped>
.content-container {
  box-shadow: 0px 3px 4px 0px rgba(0, 0, 0, 0.03);
  @apply bg-whiteColor rounded-md;
}

.table thead {
  @apply border-b border-borderColor;
}
.table th {
  @apply text-base text-headingColor font-semibold;
}

.table thead tr {
  border-bottom: none;
}

.table tbody tr {
  @apply border-b border-borderColor;
}

.payment-container {
  @apply sticky bottom-0 px-4 py-8 bg-whiteColor rounded-md border border-borderColor shadow-shadow06;
}

.ui-checkbox {
  --primary-color: #3bb77e;
  --secondary-color: #fff;
  --primary-hover-color: #def9ec;
  --checkbox-diameter: 20px;
  --checkbox-border-radius: 5px;
  --checkbox-border-color: #d9d9d9;
  --checkbox-border-width: 1px;
  --checkbox-border-style: solid;
  --checkmark-size: 1.2;
}

.ui-checkbox,
.ui-checkbox *,
.ui-checkbox *::before,
.ui-checkbox *::after {
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

.ui-checkbox {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: var(--checkbox-diameter);
  height: var(--checkbox-diameter);
  border-radius: var(--checkbox-border-radius);
  background: var(--secondary-color);
  border: var(--checkbox-border-width) var(--checkbox-border-style) var(--checkbox-border-color);
  -webkit-transition: all 0.3s;
  -o-transition: all 0.3s;
  transition: all 0.3s;
  cursor: pointer;
  position: relative;
}

.ui-checkbox::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  -webkit-box-shadow: 0 0 0 calc(var(--checkbox-diameter) / 2.5) var(--primary-color);
  box-shadow: 0 0 0 calc(var(--checkbox-diameter) / 2.5) var(--primary-color);
  border-radius: inherit;
  opacity: 0;
  -webkit-transition: all 0.5s cubic-bezier(0.12, 0.4, 0.29, 1.46);
  -o-transition: all 0.5s cubic-bezier(0.12, 0.4, 0.29, 1.46);
  transition: all 0.5s cubic-bezier(0.12, 0.4, 0.29, 1.46);
}

.ui-checkbox::before {
  top: 40%;
  left: 50%;
  content: '';
  position: absolute;
  width: 4px;
  height: 7px;
  border-right: 2px solid var(--secondary-color);
  border-bottom: 2px solid var(--secondary-color);
  -webkit-transform: translate(-50%, -50%) rotate(45deg) scale(0);
  -ms-transform: translate(-50%, -50%) rotate(45deg) scale(0);
  transform: translate(-50%, -50%) rotate(45deg) scale(0);
  opacity: 0;
  -webkit-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;
  -o-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;
  transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;
}

.ui-checkbox:hover {
  border-color: var(--primary-color);
}

.ui-checkbox:checked {
  background: var(--primary-color);
  border-color: transparent;
}

.ui-checkbox:checked::before {
  opacity: 1;
  -webkit-transform: translate(-50%, -50%) rotate(45deg) scale(var(--checkmark-size));
  -ms-transform: translate(-50%, -50%) rotate(45deg) scale(var(--checkmark-size));
  transform: translate(-50%, -50%) rotate(45deg) scale(var(--checkmark-size));
  -webkit-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;
  -o-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;
  transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;
}

.ui-checkbox:active:not(:checked)::after {
  -webkit-transition: none;
  -o-transition: none;
  -webkit-box-shadow: none;
  box-shadow: none;
  transition: none;
  opacity: 1;
}
</style>
